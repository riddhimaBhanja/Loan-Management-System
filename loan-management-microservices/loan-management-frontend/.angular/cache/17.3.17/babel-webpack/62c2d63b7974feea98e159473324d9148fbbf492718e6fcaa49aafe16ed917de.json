{"ast":null,"code":"import { inject } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { catchError, throwError } from 'rxjs';\nimport { AuthService } from '../services/auth.service';\nexport const errorInterceptor = (req, next) => {\n  const router = inject(Router);\n  const authService = inject(AuthService);\n  return next(req).pipe(catchError(error => {\n    let errorMessage = 'An error occurred';\n    if (error.error instanceof ErrorEvent) {\n      errorMessage = `Client Error: ${error.error.message}`;\n    } else {\n      // Handle status 0 (network error or CORS issue)\n      if (error.status === 0) {\n        errorMessage = 'Unable to connect to server. Please ensure the backend is running.';\n      } else {\n        switch (error.status) {\n          case 400:\n            // Extract validation errors if present\n            if (error.error?.error?.message) {\n              errorMessage = error.error.error.message;\n            } else if (error.error?.message) {\n              errorMessage = error.error.message;\n            } else if (typeof error.error === 'string') {\n              errorMessage = error.error;\n            } else {\n              errorMessage = 'Bad Request - Please check your input';\n            }\n            break;\n          case 401:\n            errorMessage = 'Unauthorized access. Please login again.';\n            console.warn('401 Unauthorized:', req.url);\n            authService.logout();\n            router.navigate(['/auth/login']);\n            break;\n          case 403:\n            errorMessage = 'Access forbidden. You don\\'t have permission.';\n            break;\n          case 404:\n            errorMessage = error.error?.message || 'Resource not found';\n            break;\n          case 409:\n            errorMessage = error.error?.message || 'Conflict occurred';\n            break;\n          case 500:\n            errorMessage = 'Internal server error. Please try again later.';\n            break;\n          default:\n            errorMessage = error.error?.message || `Server Error: ${error.status}`;\n        }\n      }\n    }\n    console.error('HTTP Error:', errorMessage, error);\n    return throwError(() => ({\n      message: errorMessage,\n      error\n    }));\n  }));\n};","map":{"version":3,"names":["inject","Router","catchError","throwError","AuthService","errorInterceptor","req","next","router","authService","pipe","error","errorMessage","ErrorEvent","message","status","console","warn","url","logout","navigate"],"sources":["C:\\Users\\KIIT\\Desktop\\Loan Management System\\loan-management-frontend\\src\\app\\core\\interceptors\\error.interceptor.ts"],"sourcesContent":["import { HttpInterceptorFn, HttpErrorResponse } from '@angular/common/http';\nimport { inject } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { catchError, throwError } from 'rxjs';\nimport { AuthService } from '../services/auth.service';\n\nexport const errorInterceptor: HttpInterceptorFn = (req, next) => {\n  const router = inject(Router);\n  const authService = inject(AuthService);\n\n  return next(req).pipe(\n    catchError((error: HttpErrorResponse) => {\n      let errorMessage = 'An error occurred';\n\n      if (error.error instanceof ErrorEvent) {\n        errorMessage = `Client Error: ${error.error.message}`;\n      } else {\n        // Handle status 0 (network error or CORS issue)\n        if (error.status === 0) {\n          errorMessage = 'Unable to connect to server. Please ensure the backend is running.';\n        } else {\n          switch (error.status) {\n            case 400:\n              // Extract validation errors if present\n              if (error.error?.error?.message) {\n                errorMessage = error.error.error.message;\n              } else if (error.error?.message) {\n                errorMessage = error.error.message;\n              } else if (typeof error.error === 'string') {\n                errorMessage = error.error;\n              } else {\n                errorMessage = 'Bad Request - Please check your input';\n              }\n              break;\n            case 401:\n              errorMessage = 'Unauthorized access. Please login again.';\n              console.warn('401 Unauthorized:', req.url);\n              authService.logout();\n              router.navigate(['/auth/login']);\n              break;\n            case 403:\n              errorMessage = 'Access forbidden. You don\\'t have permission.';\n              break;\n            case 404:\n              errorMessage = error.error?.message || 'Resource not found';\n              break;\n            case 409:\n              errorMessage = error.error?.message || 'Conflict occurred';\n              break;\n            case 500:\n              errorMessage = 'Internal server error. Please try again later.';\n              break;\n            default:\n              errorMessage = error.error?.message || `Server Error: ${error.status}`;\n          }\n        }\n      }\n\n      console.error('HTTP Error:', errorMessage, error);\n      return throwError(() => ({ message: errorMessage, error }));\n    })\n  );\n};\n"],"mappings":"AACA,SAASA,MAAM,QAAQ,eAAe;AACtC,SAASC,MAAM,QAAQ,iBAAiB;AACxC,SAASC,UAAU,EAAEC,UAAU,QAAQ,MAAM;AAC7C,SAASC,WAAW,QAAQ,0BAA0B;AAEtD,OAAO,MAAMC,gBAAgB,GAAsBA,CAACC,GAAG,EAAEC,IAAI,KAAI;EAC/D,MAAMC,MAAM,GAAGR,MAAM,CAACC,MAAM,CAAC;EAC7B,MAAMQ,WAAW,GAAGT,MAAM,CAACI,WAAW,CAAC;EAEvC,OAAOG,IAAI,CAACD,GAAG,CAAC,CAACI,IAAI,CACnBR,UAAU,CAAES,KAAwB,IAAI;IACtC,IAAIC,YAAY,GAAG,mBAAmB;IAEtC,IAAID,KAAK,CAACA,KAAK,YAAYE,UAAU,EAAE;MACrCD,YAAY,GAAG,iBAAiBD,KAAK,CAACA,KAAK,CAACG,OAAO,EAAE;KACtD,MAAM;MACL;MACA,IAAIH,KAAK,CAACI,MAAM,KAAK,CAAC,EAAE;QACtBH,YAAY,GAAG,oEAAoE;OACpF,MAAM;QACL,QAAQD,KAAK,CAACI,MAAM;UAClB,KAAK,GAAG;YACN;YACA,IAAIJ,KAAK,CAACA,KAAK,EAAEA,KAAK,EAAEG,OAAO,EAAE;cAC/BF,YAAY,GAAGD,KAAK,CAACA,KAAK,CAACA,KAAK,CAACG,OAAO;aACzC,MAAM,IAAIH,KAAK,CAACA,KAAK,EAAEG,OAAO,EAAE;cAC/BF,YAAY,GAAGD,KAAK,CAACA,KAAK,CAACG,OAAO;aACnC,MAAM,IAAI,OAAOH,KAAK,CAACA,KAAK,KAAK,QAAQ,EAAE;cAC1CC,YAAY,GAAGD,KAAK,CAACA,KAAK;aAC3B,MAAM;cACLC,YAAY,GAAG,uCAAuC;;YAExD;UACF,KAAK,GAAG;YACNA,YAAY,GAAG,0CAA0C;YACzDI,OAAO,CAACC,IAAI,CAAC,mBAAmB,EAAEX,GAAG,CAACY,GAAG,CAAC;YAC1CT,WAAW,CAACU,MAAM,EAAE;YACpBX,MAAM,CAACY,QAAQ,CAAC,CAAC,aAAa,CAAC,CAAC;YAChC;UACF,KAAK,GAAG;YACNR,YAAY,GAAG,+CAA+C;YAC9D;UACF,KAAK,GAAG;YACNA,YAAY,GAAGD,KAAK,CAACA,KAAK,EAAEG,OAAO,IAAI,oBAAoB;YAC3D;UACF,KAAK,GAAG;YACNF,YAAY,GAAGD,KAAK,CAACA,KAAK,EAAEG,OAAO,IAAI,mBAAmB;YAC1D;UACF,KAAK,GAAG;YACNF,YAAY,GAAG,gDAAgD;YAC/D;UACF;YACEA,YAAY,GAAGD,KAAK,CAACA,KAAK,EAAEG,OAAO,IAAI,iBAAiBH,KAAK,CAACI,MAAM,EAAE;;;;IAK9EC,OAAO,CAACL,KAAK,CAAC,aAAa,EAAEC,YAAY,EAAED,KAAK,CAAC;IACjD,OAAOR,UAAU,CAAC,OAAO;MAAEW,OAAO,EAAEF,YAAY;MAAED;IAAK,CAAE,CAAC,CAAC;EAC7D,CAAC,CAAC,CACH;AACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}