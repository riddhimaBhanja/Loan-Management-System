{"ast":null,"code":"import { signal } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule, Validators } from '@angular/forms';\nimport { MAT_DIALOG_DATA, MatDialogModule } from '@angular/material/dialog';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatDatepickerModule } from '@angular/material/datepicker';\nimport { MatNativeDateModule } from '@angular/material/core';\nimport { MatIconModule } from '@angular/material/icon';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/material/dialog\";\nimport * as i3 from \"@core/services/loan.service\";\nimport * as i4 from \"@angular/material/snack-bar\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/form-field\";\nimport * as i7 from \"@angular/material/input\";\nimport * as i8 from \"@angular/material/button\";\nimport * as i9 from \"@angular/material/progress-spinner\";\nimport * as i10 from \"@angular/material/select\";\nimport * as i11 from \"@angular/material/core\";\nimport * as i12 from \"@angular/material/datepicker\";\nimport * as i13 from \"@angular/material/icon\";\nfunction LoanDisburseDialogComponent_Conditional_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \"Disbursement date is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoanDisburseDialogComponent_Conditional_47_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \"Disbursement method is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoanDisburseDialogComponent_div_48_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26)(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"account_balance\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"h4\");\n    i0.ɵɵtext(4, \"Bank Account Details\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction LoanDisburseDialogComponent_mat_form_field_49_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-form-field\", 7)(1, \"mat-label\");\n    i0.ɵɵtext(2, \"Account Number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 27);\n    i0.ɵɵelementStart(4, \"mat-hint\");\n    i0.ɵɵtext(5, \"Enter the customer's bank account number\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction LoanDisburseDialogComponent_mat_form_field_50_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-form-field\", 7)(1, \"mat-label\");\n    i0.ɵɵtext(2, \"Bank Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 28);\n    i0.ɵɵelementStart(4, \"mat-hint\");\n    i0.ɵɵtext(5, \"e.g., HDFC Bank, State Bank of India\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction LoanDisburseDialogComponent_mat_form_field_51_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-form-field\", 7)(1, \"mat-label\");\n    i0.ɵɵtext(2, \"IFSC Code\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 29);\n    i0.ɵɵelementStart(4, \"mat-hint\");\n    i0.ɵɵtext(5, \"11-character bank IFSC code\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction LoanDisburseDialogComponent_Conditional_68_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-spinner\", 25);\n  }\n}\nfunction LoanDisburseDialogComponent_Conditional_69_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Disburse Loan\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class LoanDisburseDialogComponent {\n  constructor(fb, dialogRef, loanService, snackBar, data) {\n    this.fb = fb;\n    this.dialogRef = dialogRef;\n    this.loanService = loanService;\n    this.snackBar = snackBar;\n    this.data = data;\n    this.isSubmitting = signal(false);\n    this.disburseForm = this.createForm();\n  }\n  createForm() {\n    return this.fb.group({\n      disbursementDate: [new Date(), [Validators.required]],\n      disbursementMethod: ['', [Validators.required, Validators.maxLength(50)]],\n      accountNumber: ['', [Validators.maxLength(20)]],\n      bankName: ['', [Validators.maxLength(100)]],\n      ifscCode: ['', [Validators.maxLength(11)]],\n      referenceNumber: ['', [Validators.maxLength(100)]],\n      remarks: ['', [Validators.maxLength(500)]]\n    });\n  }\n  showBankFields() {\n    const method = this.disburseForm.get('disbursementMethod')?.value;\n    return ['BANK_TRANSFER', 'RTGS', 'NEFT', 'IMPS', 'ONLINE_PAYMENT'].includes(method);\n  }\n  onCancel() {\n    this.dialogRef.close();\n  }\n  onSubmit() {\n    if (this.disburseForm.valid) {\n      this.isSubmitting.set(true);\n      this.disburseLoan();\n    }\n  }\n  disburseLoan() {\n    const formValue = this.disburseForm.value;\n    // Format the date to YYYY-MM-DD\n    const disbursementDate = new Date(formValue.disbursementDate);\n    const formattedDate = disbursementDate.toISOString().split('T')[0];\n    const request = {\n      disbursementDate: formattedDate,\n      disbursementMethod: formValue.disbursementMethod,\n      accountNumber: formValue.accountNumber || undefined,\n      bankName: formValue.bankName || undefined,\n      ifscCode: formValue.ifscCode || undefined,\n      referenceNumber: formValue.referenceNumber || undefined,\n      remarks: formValue.remarks || undefined\n    };\n    this.loanService.disburseLoan(this.data.loan.id, request).subscribe({\n      next: response => {\n        if (response.success) {\n          this.snackBar.open('Loan disbursed successfully. EMI schedule has been generated.', 'Close', {\n            duration: 5000,\n            panelClass: ['success-snackbar']\n          });\n          this.dialogRef.close(true);\n        }\n        this.isSubmitting.set(false);\n      },\n      error: error => {\n        console.error('Error disbursing loan:', error);\n        // Extract error message - the error interceptor has already processed it\n        const errorMessage = error?.message || 'Failed to disburse loan. Please try again.';\n        this.snackBar.open(errorMessage, 'Close', {\n          duration: 5000,\n          panelClass: ['error-snackbar']\n        });\n        this.isSubmitting.set(false);\n      }\n    });\n  }\n  static {\n    this.ɵfac = function LoanDisburseDialogComponent_Factory(t) {\n      return new (t || LoanDisburseDialogComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.MatDialogRef), i0.ɵɵdirectiveInject(i3.LoanService), i0.ɵɵdirectiveInject(i4.MatSnackBar), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LoanDisburseDialogComponent,\n      selectors: [[\"app-loan-disburse-dialog\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 70,\n      vars: 19,\n      consts: [[\"picker\", \"\"], [\"mat-dialog-title\", \"\"], [1, \"loan-info\"], [1, \"info-row\"], [1, \"label\"], [1, \"value\"], [1, \"disburse-form\", 3, \"formGroup\"], [\"appearance\", \"outline\", 1, \"full-width\"], [\"matInput\", \"\", \"formControlName\", \"disbursementDate\", \"placeholder\", \"Select date\", 3, \"matDatepicker\"], [\"matIconSuffix\", \"\", 3, \"for\"], [\"formControlName\", \"disbursementMethod\", \"placeholder\", \"Select method\"], [\"value\", \"BANK_TRANSFER\"], [\"value\", \"CHEQUE\"], [\"value\", \"CASH\"], [\"value\", \"ONLINE_PAYMENT\"], [\"value\", \"RTGS\"], [\"value\", \"NEFT\"], [\"value\", \"IMPS\"], [\"class\", \"section-header\", 4, \"ngIf\"], [\"appearance\", \"outline\", \"class\", \"full-width\", 4, \"ngIf\"], [\"matInput\", \"\", \"formControlName\", \"referenceNumber\", \"placeholder\", \"Transaction/Reference Number\", \"maxlength\", \"100\"], [\"matInput\", \"\", \"formControlName\", \"remarks\", \"rows\", \"3\", \"placeholder\", \"Additional remarks (optional)\", \"maxlength\", \"500\"], [\"align\", \"end\"], [\"mat-button\", \"\", 3, \"click\", \"disabled\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\", \"disabled\"], [\"diameter\", \"20\"], [1, \"section-header\"], [\"matInput\", \"\", \"formControlName\", \"accountNumber\", \"placeholder\", \"Customer's bank account number\", \"maxlength\", \"20\"], [\"matInput\", \"\", \"formControlName\", \"bankName\", \"placeholder\", \"Name of the bank\", \"maxlength\", \"100\"], [\"matInput\", \"\", \"formControlName\", \"ifscCode\", \"placeholder\", \"Bank IFSC code\", \"maxlength\", \"11\"]],\n      template: function LoanDisburseDialogComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"h2\", 1);\n          i0.ɵɵtext(1, \"Disburse Loan\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(2, \"mat-dialog-content\")(3, \"div\", 2)(4, \"div\", 3)(5, \"span\", 4);\n          i0.ɵɵtext(6, \"Application Number:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"span\", 5);\n          i0.ɵɵtext(8);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(9, \"div\", 3)(10, \"span\", 4);\n          i0.ɵɵtext(11, \"Customer:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"span\", 5);\n          i0.ɵɵtext(13);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(14, \"div\", 3)(15, \"span\", 4);\n          i0.ɵɵtext(16, \"Approved Amount:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(17, \"span\", 5);\n          i0.ɵɵtext(18);\n          i0.ɵɵpipe(19, \"number\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(20, \"form\", 6)(21, \"mat-form-field\", 7)(22, \"mat-label\");\n          i0.ɵɵtext(23, \"Disbursement Date\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(24, \"input\", 8)(25, \"mat-datepicker-toggle\", 9)(26, \"mat-datepicker\", null, 0);\n          i0.ɵɵtemplate(28, LoanDisburseDialogComponent_Conditional_28_Template, 2, 0, \"mat-error\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(29, \"mat-form-field\", 7)(30, \"mat-label\");\n          i0.ɵɵtext(31, \"Disbursement Method\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(32, \"mat-select\", 10)(33, \"mat-option\", 11);\n          i0.ɵɵtext(34, \"Bank Transfer\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(35, \"mat-option\", 12);\n          i0.ɵɵtext(36, \"Cheque\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(37, \"mat-option\", 13);\n          i0.ɵɵtext(38, \"Cash\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(39, \"mat-option\", 14);\n          i0.ɵɵtext(40, \"Online Payment\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(41, \"mat-option\", 15);\n          i0.ɵɵtext(42, \"RTGS\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(43, \"mat-option\", 16);\n          i0.ɵɵtext(44, \"NEFT\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(45, \"mat-option\", 17);\n          i0.ɵɵtext(46, \"IMPS\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(47, LoanDisburseDialogComponent_Conditional_47_Template, 2, 0, \"mat-error\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(48, LoanDisburseDialogComponent_div_48_Template, 5, 0, \"div\", 18)(49, LoanDisburseDialogComponent_mat_form_field_49_Template, 6, 0, \"mat-form-field\", 19)(50, LoanDisburseDialogComponent_mat_form_field_50_Template, 6, 0, \"mat-form-field\", 19)(51, LoanDisburseDialogComponent_mat_form_field_51_Template, 6, 0, \"mat-form-field\", 19);\n          i0.ɵɵelementStart(52, \"mat-form-field\", 7)(53, \"mat-label\");\n          i0.ɵɵtext(54, \"Reference Number\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(55, \"input\", 20);\n          i0.ɵɵelementStart(56, \"mat-hint\");\n          i0.ɵɵtext(57, \"Optional - Enter transaction or reference number\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(58, \"mat-form-field\", 7)(59, \"mat-label\");\n          i0.ɵɵtext(60, \"Remarks\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(61, \"textarea\", 21);\n          i0.ɵɵelementStart(62, \"mat-hint\");\n          i0.ɵɵtext(63);\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(64, \"mat-dialog-actions\", 22)(65, \"button\", 23);\n          i0.ɵɵlistener(\"click\", function LoanDisburseDialogComponent_Template_button_click_65_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.onCancel());\n          });\n          i0.ɵɵtext(66, \"Cancel\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(67, \"button\", 24);\n          i0.ɵɵlistener(\"click\", function LoanDisburseDialogComponent_Template_button_click_67_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.onSubmit());\n          });\n          i0.ɵɵtemplate(68, LoanDisburseDialogComponent_Conditional_68_Template, 1, 0, \"mat-spinner\", 25)(69, LoanDisburseDialogComponent_Conditional_69_Template, 2, 0);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          let tmp_7_0;\n          let tmp_8_0;\n          let tmp_13_0;\n          const picker_r2 = i0.ɵɵreference(27);\n          i0.ɵɵadvance(8);\n          i0.ɵɵtextInterpolate(ctx.data.loan.applicationNumber);\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate(ctx.data.loan.customerName);\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate1(\"\\u20B9\", i0.ɵɵpipeBind2(19, 16, ctx.data.loan.approvedAmount, \"1.2-2\"), \"\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"formGroup\", ctx.disburseForm);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"matDatepicker\", picker_r2);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"for\", picker_r2);\n          i0.ɵɵadvance(3);\n          i0.ɵɵconditional(28, ((tmp_7_0 = ctx.disburseForm.get(\"disbursementDate\")) == null ? null : tmp_7_0.invalid) && ((tmp_7_0 = ctx.disburseForm.get(\"disbursementDate\")) == null ? null : tmp_7_0.touched) ? 28 : -1);\n          i0.ɵɵadvance(19);\n          i0.ɵɵconditional(47, ((tmp_8_0 = ctx.disburseForm.get(\"disbursementMethod\")) == null ? null : tmp_8_0.invalid) && ((tmp_8_0 = ctx.disburseForm.get(\"disbursementMethod\")) == null ? null : tmp_8_0.touched) ? 47 : -1);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.showBankFields());\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.showBankFields());\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.showBankFields());\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.showBankFields());\n          i0.ɵɵadvance(12);\n          i0.ɵɵtextInterpolate1(\"\", ((tmp_13_0 = ctx.disburseForm.get(\"remarks\")) == null ? null : tmp_13_0.value == null ? null : tmp_13_0.value.length) || 0, \"/500\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"disabled\", ctx.isSubmitting());\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"disabled\", ctx.disburseForm.invalid || ctx.isSubmitting());\n          i0.ɵɵadvance();\n          i0.ɵɵconditional(68, ctx.isSubmitting() ? 68 : 69);\n        }\n      },\n      dependencies: [CommonModule, i5.NgIf, i5.DecimalPipe, ReactiveFormsModule, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.MaxLengthValidator, i1.FormGroupDirective, i1.FormControlName, MatDialogModule, i2.MatDialogTitle, i2.MatDialogActions, i2.MatDialogContent, MatFormFieldModule, i6.MatFormField, i6.MatLabel, i6.MatHint, i6.MatError, i6.MatSuffix, MatInputModule, i7.MatInput, MatButtonModule, i8.MatButton, MatProgressSpinnerModule, i9.MatProgressSpinner, MatSnackBarModule, MatSelectModule, i10.MatSelect, i11.MatOption, MatDatepickerModule, i12.MatDatepicker, i12.MatDatepickerInput, i12.MatDatepickerToggle, MatNativeDateModule, MatIconModule, i13.MatIcon],\n      styles: [\"mat-dialog-content[_ngcontent-%COMP%] {\\n  min-width: 550px;\\n  max-width: 650px;\\n  padding: 24px;\\n}\\n\\n.loan-info[_ngcontent-%COMP%] {\\n  background-color: #f5f5f5;\\n  padding: 16px;\\n  border-radius: 8px;\\n  margin-bottom: 24px;\\n}\\n\\n.info-row[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n  margin-bottom: 8px;\\n}\\n\\n.info-row[_ngcontent-%COMP%]:last-child {\\n  margin-bottom: 0;\\n}\\n\\n.label[_ngcontent-%COMP%] {\\n  font-weight: 500;\\n  color: rgba(0, 0, 0, 0.6);\\n}\\n\\n.value[_ngcontent-%COMP%] {\\n  font-weight: 600;\\n  color: rgba(0, 0, 0, 0.87);\\n}\\n\\n.disburse-form[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 16px;\\n}\\n\\n.section-header[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  gap: 12px;\\n  margin: 16px 0 8px 0;\\n  padding-bottom: 8px;\\n  border-bottom: 2px solid rgba(102, 126, 234, 0.2);\\n}\\n.section-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%] {\\n  color: #667eea;\\n}\\n.section-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\\n  margin: 0;\\n  font-size: 16px;\\n  font-weight: 600;\\n  color: #667eea;\\n}\\n\\n.full-width[_ngcontent-%COMP%] {\\n  width: 100%;\\n}\\n\\nmat-dialog-actions[_ngcontent-%COMP%] {\\n  padding: 16px 24px;\\n  gap: 12px;\\n}\\n\\nmat-spinner[_ngcontent-%COMP%] {\\n  display: inline-block;\\n  margin: 0 auto;\\n}\\n\\n  .mat-mdc-dialog-container {\\n  border-radius: 16px;\\n}\\n\\n@media (max-width: 768px) {\\n  mat-dialog-content[_ngcontent-%COMP%] {\\n    min-width: 100%;\\n    max-width: 100%;\\n    padding: 16px;\\n  }\\n  .loan-info[_ngcontent-%COMP%] {\\n    padding: 12px;\\n  }\\n  .info-row[_ngcontent-%COMP%] {\\n    flex-direction: column;\\n    gap: 4px;\\n    margin-bottom: 12px;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbW9kdWxlcy9sb2FuL2xvYW4tZGlzYnVyc2UtZGlhbG9nLmNvbXBvbmVudC50cyIsIndlYnBhY2s6Ly8uLy4uLy4uL0xvYW4lMjBNYW5hZ2VtZW50JTIwU3lzdGVtL2xvYW4tbWFuYWdlbWVudC1mcm9udGVuZC9zcmMvYXBwL21vZHVsZXMvbG9hbi9sb2FuLWRpc2J1cnNlLWRpYWxvZy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0k7RUFDRSxnQkFBQTtFQUNBLGdCQUFBO0VBQ0EsYUFBQTtBQ0FOOztBREdJO0VBQ0UseUJBQUE7RUFDQSxhQUFBO0VBQ0Esa0JBQUE7RUFDQSxtQkFBQTtBQ0FOOztBREdJO0VBQ0UsYUFBQTtFQUNBLDhCQUFBO0VBQ0Esa0JBQUE7QUNBTjs7QURHSTtFQUNFLGdCQUFBO0FDQU47O0FER0k7RUFDRSxnQkFBQTtFQUNBLHlCQUFBO0FDQU47O0FER0k7RUFDRSxnQkFBQTtFQUNBLDBCQUFBO0FDQU47O0FER0k7RUFDRSxhQUFBO0VBQ0Esc0JBQUE7RUFDQSxTQUFBO0FDQU47O0FER0k7RUFDRSxhQUFBO0VBQ0EsbUJBQUE7RUFDQSxTQUFBO0VBQ0Esb0JBQUE7RUFDQSxtQkFBQTtFQUNBLGlEQUFBO0FDQU47QURFTTtFQUNFLGNBQUE7QUNBUjtBREdNO0VBQ0UsU0FBQTtFQUNBLGVBQUE7RUFDQSxnQkFBQTtFQUNBLGNBQUE7QUNEUjs7QURLSTtFQUNFLFdBQUE7QUNGTjs7QURLSTtFQUNFLGtCQUFBO0VBQ0EsU0FBQTtBQ0ZOOztBREtJO0VBQ0UscUJBQUE7RUFDQSxjQUFBO0FDRk47O0FES0k7RUFDRSxtQkFBQTtBQ0ZOOztBREtJO0VBQ0U7SUFDRSxlQUFBO0lBQ0EsZUFBQTtJQUNBLGFBQUE7RUNGTjtFREtJO0lBQ0UsYUFBQTtFQ0hOO0VETUk7SUFDRSxzQkFBQTtJQUNBLFFBQUE7SUFDQSxtQkFBQTtFQ0pOO0FBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICBtYXQtZGlhbG9nLWNvbnRlbnQge1xuICAgICAgbWluLXdpZHRoOiA1NTBweDtcbiAgICAgIG1heC13aWR0aDogNjUwcHg7XG4gICAgICBwYWRkaW5nOiAyNHB4O1xuICAgIH1cblxuICAgIC5sb2FuLWluZm8ge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2Y1ZjVmNTtcbiAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICBtYXJnaW4tYm90dG9tOiAyNHB4O1xuICAgIH1cblxuICAgIC5pbmZvLXJvdyB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgIH1cblxuICAgIC5pbmZvLXJvdzpsYXN0LWNoaWxkIHtcbiAgICAgIG1hcmdpbi1ib3R0b206IDA7XG4gICAgfVxuXG4gICAgLmxhYmVsIHtcbiAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjYpO1xuICAgIH1cblxuICAgIC52YWx1ZSB7XG4gICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC44Nyk7XG4gICAgfVxuXG4gICAgLmRpc2J1cnNlLWZvcm0ge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICBnYXA6IDE2cHg7XG4gICAgfVxuXG4gICAgLnNlY3Rpb24taGVhZGVyIHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgZ2FwOiAxMnB4O1xuICAgICAgbWFyZ2luOiAxNnB4IDAgOHB4IDA7XG4gICAgICBwYWRkaW5nLWJvdHRvbTogOHB4O1xuICAgICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkIHJnYmEoMTAyLCAxMjYsIDIzNCwgMC4yKTtcblxuICAgICAgbWF0LWljb24ge1xuICAgICAgICBjb2xvcjogIzY2N2VlYTtcbiAgICAgIH1cblxuICAgICAgaDQge1xuICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgICAgY29sb3I6ICM2NjdlZWE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLmZ1bGwtd2lkdGgge1xuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgfVxuXG4gICAgbWF0LWRpYWxvZy1hY3Rpb25zIHtcbiAgICAgIHBhZGRpbmc6IDE2cHggMjRweDtcbiAgICAgIGdhcDogMTJweDtcbiAgICB9XG5cbiAgICBtYXQtc3Bpbm5lciB7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICBtYXJnaW46IDAgYXV0bztcbiAgICB9XG5cbiAgICA6Om5nLWRlZXAgLm1hdC1tZGMtZGlhbG9nLWNvbnRhaW5lciB7XG4gICAgICBib3JkZXItcmFkaXVzOiAxNnB4O1xuICAgIH1cblxuICAgIEBtZWRpYSAobWF4LXdpZHRoOiA3NjhweCkge1xuICAgICAgbWF0LWRpYWxvZy1jb250ZW50IHtcbiAgICAgICAgbWluLXdpZHRoOiAxMDAlO1xuICAgICAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICB9XG5cbiAgICAgIC5sb2FuLWluZm8ge1xuICAgICAgICBwYWRkaW5nOiAxMnB4O1xuICAgICAgfVxuXG4gICAgICAuaW5mby1yb3cge1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBnYXA6IDRweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTJweDtcbiAgICAgIH1cbiAgICB9XG4gICIsIm1hdC1kaWFsb2ctY29udGVudCB7XG4gIG1pbi13aWR0aDogNTUwcHg7XG4gIG1heC13aWR0aDogNjUwcHg7XG4gIHBhZGRpbmc6IDI0cHg7XG59XG5cbi5sb2FuLWluZm8ge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjVmNWY1O1xuICBwYWRkaW5nOiAxNnB4O1xuICBib3JkZXItcmFkaXVzOiA4cHg7XG4gIG1hcmdpbi1ib3R0b206IDI0cHg7XG59XG5cbi5pbmZvLXJvdyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgbWFyZ2luLWJvdHRvbTogOHB4O1xufVxuXG4uaW5mby1yb3c6bGFzdC1jaGlsZCB7XG4gIG1hcmdpbi1ib3R0b206IDA7XG59XG5cbi5sYWJlbCB7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNik7XG59XG5cbi52YWx1ZSB7XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG4gIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuODcpO1xufVxuXG4uZGlzYnVyc2UtZm9ybSB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGdhcDogMTZweDtcbn1cblxuLnNlY3Rpb24taGVhZGVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZ2FwOiAxMnB4O1xuICBtYXJnaW46IDE2cHggMCA4cHggMDtcbiAgcGFkZGluZy1ib3R0b206IDhweDtcbiAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkIHJnYmEoMTAyLCAxMjYsIDIzNCwgMC4yKTtcbn1cbi5zZWN0aW9uLWhlYWRlciBtYXQtaWNvbiB7XG4gIGNvbG9yOiAjNjY3ZWVhO1xufVxuLnNlY3Rpb24taGVhZGVyIGg0IHtcbiAgbWFyZ2luOiAwO1xuICBmb250LXNpemU6IDE2cHg7XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG4gIGNvbG9yOiAjNjY3ZWVhO1xufVxuXG4uZnVsbC13aWR0aCB7XG4gIHdpZHRoOiAxMDAlO1xufVxuXG5tYXQtZGlhbG9nLWFjdGlvbnMge1xuICBwYWRkaW5nOiAxNnB4IDI0cHg7XG4gIGdhcDogMTJweDtcbn1cblxubWF0LXNwaW5uZXIge1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIG1hcmdpbjogMCBhdXRvO1xufVxuXG46Om5nLWRlZXAgLm1hdC1tZGMtZGlhbG9nLWNvbnRhaW5lciB7XG4gIGJvcmRlci1yYWRpdXM6IDE2cHg7XG59XG5cbkBtZWRpYSAobWF4LXdpZHRoOiA3NjhweCkge1xuICBtYXQtZGlhbG9nLWNvbnRlbnQge1xuICAgIG1pbi13aWR0aDogMTAwJTtcbiAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgcGFkZGluZzogMTZweDtcbiAgfVxuICAubG9hbi1pbmZvIHtcbiAgICBwYWRkaW5nOiAxMnB4O1xuICB9XG4gIC5pbmZvLXJvdyB7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBnYXA6IDRweDtcbiAgICBtYXJnaW4tYm90dG9tOiAxMnB4O1xuICB9XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"names":["signal","CommonModule","ReactiveFormsModule","Validators","MAT_DIALOG_DATA","MatDialogModule","MatFormFieldModule","MatInputModule","MatButtonModule","MatProgressSpinnerModule","MatSnackBarModule","MatSelectModule","MatDatepickerModule","MatNativeDateModule","MatIconModule","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","LoanDisburseDialogComponent","constructor","fb","dialogRef","loanService","snackBar","data","isSubmitting","disburseForm","createForm","group","disbursementDate","Date","required","disbursementMethod","maxLength","accountNumber","bankName","ifscCode","referenceNumber","remarks","showBankFields","method","get","value","includes","onCancel","close","onSubmit","valid","set","disburseLoan","formValue","formattedDate","toISOString","split","request","undefined","loan","id","subscribe","next","response","success","open","duration","panelClass","error","console","errorMessage","message","ɵɵdirectiveInject","i1","FormBuilder","i2","MatDialogRef","i3","LoanService","i4","MatSnackBar","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","LoanDisburseDialogComponent_Template","rf","ctx","ɵɵtemplate","LoanDisburseDialogComponent_Conditional_28_Template","LoanDisburseDialogComponent_Conditional_47_Template","LoanDisburseDialogComponent_div_48_Template","LoanDisburseDialogComponent_mat_form_field_49_Template","LoanDisburseDialogComponent_mat_form_field_50_Template","LoanDisburseDialogComponent_mat_form_field_51_Template","ɵɵlistener","LoanDisburseDialogComponent_Template_button_click_65_listener","ɵɵrestoreView","_r1","ɵɵresetView","LoanDisburseDialogComponent_Template_button_click_67_listener","LoanDisburseDialogComponent_Conditional_68_Template","LoanDisburseDialogComponent_Conditional_69_Template","ɵɵadvance","ɵɵtextInterpolate","applicationNumber","customerName","ɵɵtextInterpolate1","ɵɵpipeBind2","approvedAmount","ɵɵproperty","picker_r2","ɵɵconditional","tmp_7_0","invalid","touched","tmp_8_0","tmp_13_0","length","i5","NgIf","DecimalPipe","ɵNgNoValidate","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","MaxLengthValidator","FormGroupDirective","FormControlName","MatDialogTitle","MatDialogActions","MatDialogContent","i6","MatFormField","MatLabel","MatHint","MatError","MatSuffix","i7","MatInput","i8","MatButton","i9","MatProgressSpinner","i10","MatSelect","i11","MatOption","i12","MatDatepicker","MatDatepickerInput","MatDatepickerToggle","i13","MatIcon","styles"],"sources":["C:\\Users\\KIIT\\Desktop\\Loan Management System\\loan-management-frontend\\src\\app\\modules\\loan\\loan-disburse-dialog.component.ts"],"sourcesContent":["import { Component, Inject, signal } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormBuilder, FormGroup, ReactiveFormsModule, Validators } from '@angular/forms';\nimport { MAT_DIALOG_DATA, MatDialogModule, MatDialogRef } from '@angular/material/dialog';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { MatSnackBar, MatSnackBarModule } from '@angular/material/snack-bar';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatDatepickerModule } from '@angular/material/datepicker';\nimport { MatNativeDateModule } from '@angular/material/core';\nimport { MatIconModule } from '@angular/material/icon';\nimport { LoanService } from '@core/services/loan.service';\nimport { Loan, LoanDisbursementRequest } from '@core/models/loan.model';\n\nexport interface LoanDisburseDialogData {\n  loan: Loan;\n}\n\n@Component({\n  selector: 'app-loan-disburse-dialog',\n  standalone: true,\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    MatDialogModule,\n    MatFormFieldModule,\n    MatInputModule,\n    MatButtonModule,\n    MatProgressSpinnerModule,\n    MatSnackBarModule,\n    MatSelectModule,\n    MatDatepickerModule,\n    MatNativeDateModule,\n    MatIconModule\n  ],\n  template: `\n    <h2 mat-dialog-title>Disburse Loan</h2>\n\n    <mat-dialog-content>\n      <div class=\"loan-info\">\n        <div class=\"info-row\">\n          <span class=\"label\">Application Number:</span>\n          <span class=\"value\">{{ data.loan.applicationNumber }}</span>\n        </div>\n        <div class=\"info-row\">\n          <span class=\"label\">Customer:</span>\n          <span class=\"value\">{{ data.loan.customerName }}</span>\n        </div>\n        <div class=\"info-row\">\n          <span class=\"label\">Approved Amount:</span>\n          <span class=\"value\">₹{{ data.loan.approvedAmount | number:'1.2-2' }}</span>\n        </div>\n      </div>\n\n      <form [formGroup]=\"disburseForm\" class=\"disburse-form\">\n        <mat-form-field appearance=\"outline\" class=\"full-width\">\n          <mat-label>Disbursement Date</mat-label>\n          <input matInput [matDatepicker]=\"picker\" formControlName=\"disbursementDate\" placeholder=\"Select date\" />\n          <mat-datepicker-toggle matIconSuffix [for]=\"picker\"></mat-datepicker-toggle>\n          <mat-datepicker #picker></mat-datepicker>\n          @if (disburseForm.get('disbursementDate')?.invalid && disburseForm.get('disbursementDate')?.touched) {\n            <mat-error>Disbursement date is required</mat-error>\n          }\n        </mat-form-field>\n\n        <mat-form-field appearance=\"outline\" class=\"full-width\">\n          <mat-label>Disbursement Method</mat-label>\n          <mat-select formControlName=\"disbursementMethod\" placeholder=\"Select method\">\n            <mat-option value=\"BANK_TRANSFER\">Bank Transfer</mat-option>\n            <mat-option value=\"CHEQUE\">Cheque</mat-option>\n            <mat-option value=\"CASH\">Cash</mat-option>\n            <mat-option value=\"ONLINE_PAYMENT\">Online Payment</mat-option>\n            <mat-option value=\"RTGS\">RTGS</mat-option>\n            <mat-option value=\"NEFT\">NEFT</mat-option>\n            <mat-option value=\"IMPS\">IMPS</mat-option>\n          </mat-select>\n          @if (disburseForm.get('disbursementMethod')?.invalid && disburseForm.get('disbursementMethod')?.touched) {\n            <mat-error>Disbursement method is required</mat-error>\n          }\n        </mat-form-field>\n\n        <!-- Bank Details Section -->\n        <div class=\"section-header\" *ngIf=\"showBankFields()\">\n          <mat-icon>account_balance</mat-icon>\n          <h4>Bank Account Details</h4>\n        </div>\n\n        <mat-form-field appearance=\"outline\" class=\"full-width\" *ngIf=\"showBankFields()\">\n          <mat-label>Account Number</mat-label>\n          <input matInput formControlName=\"accountNumber\" placeholder=\"Customer's bank account number\" maxlength=\"20\" />\n          <mat-hint>Enter the customer's bank account number</mat-hint>\n        </mat-form-field>\n\n        <mat-form-field appearance=\"outline\" class=\"full-width\" *ngIf=\"showBankFields()\">\n          <mat-label>Bank Name</mat-label>\n          <input matInput formControlName=\"bankName\" placeholder=\"Name of the bank\" maxlength=\"100\" />\n          <mat-hint>e.g., HDFC Bank, State Bank of India</mat-hint>\n        </mat-form-field>\n\n        <mat-form-field appearance=\"outline\" class=\"full-width\" *ngIf=\"showBankFields()\">\n          <mat-label>IFSC Code</mat-label>\n          <input matInput formControlName=\"ifscCode\" placeholder=\"Bank IFSC code\" maxlength=\"11\" />\n          <mat-hint>11-character bank IFSC code</mat-hint>\n        </mat-form-field>\n\n        <mat-form-field appearance=\"outline\" class=\"full-width\">\n          <mat-label>Reference Number</mat-label>\n          <input matInput formControlName=\"referenceNumber\" placeholder=\"Transaction/Reference Number\" maxlength=\"100\" />\n          <mat-hint>Optional - Enter transaction or reference number</mat-hint>\n        </mat-form-field>\n\n        <mat-form-field appearance=\"outline\" class=\"full-width\">\n          <mat-label>Remarks</mat-label>\n          <textarea matInput formControlName=\"remarks\" rows=\"3\" placeholder=\"Additional remarks (optional)\" maxlength=\"500\"></textarea>\n          <mat-hint>{{ disburseForm.get('remarks')?.value?.length || 0 }}/500</mat-hint>\n        </mat-form-field>\n      </form>\n    </mat-dialog-content>\n\n    <mat-dialog-actions align=\"end\">\n      <button mat-button (click)=\"onCancel()\" [disabled]=\"isSubmitting()\">Cancel</button>\n      <button mat-raised-button color=\"primary\" (click)=\"onSubmit()\" [disabled]=\"disburseForm.invalid || isSubmitting()\">\n        @if (isSubmitting()) {\n          <mat-spinner diameter=\"20\"></mat-spinner>\n        } @else {\n          <span>Disburse Loan</span>\n        }\n      </button>\n    </mat-dialog-actions>\n  `,\n  styles: [`\n    mat-dialog-content {\n      min-width: 550px;\n      max-width: 650px;\n      padding: 24px;\n    }\n\n    .loan-info {\n      background-color: #f5f5f5;\n      padding: 16px;\n      border-radius: 8px;\n      margin-bottom: 24px;\n    }\n\n    .info-row {\n      display: flex;\n      justify-content: space-between;\n      margin-bottom: 8px;\n    }\n\n    .info-row:last-child {\n      margin-bottom: 0;\n    }\n\n    .label {\n      font-weight: 500;\n      color: rgba(0, 0, 0, 0.6);\n    }\n\n    .value {\n      font-weight: 600;\n      color: rgba(0, 0, 0, 0.87);\n    }\n\n    .disburse-form {\n      display: flex;\n      flex-direction: column;\n      gap: 16px;\n    }\n\n    .section-header {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      margin: 16px 0 8px 0;\n      padding-bottom: 8px;\n      border-bottom: 2px solid rgba(102, 126, 234, 0.2);\n\n      mat-icon {\n        color: #667eea;\n      }\n\n      h4 {\n        margin: 0;\n        font-size: 16px;\n        font-weight: 600;\n        color: #667eea;\n      }\n    }\n\n    .full-width {\n      width: 100%;\n    }\n\n    mat-dialog-actions {\n      padding: 16px 24px;\n      gap: 12px;\n    }\n\n    mat-spinner {\n      display: inline-block;\n      margin: 0 auto;\n    }\n\n    ::ng-deep .mat-mdc-dialog-container {\n      border-radius: 16px;\n    }\n\n    @media (max-width: 768px) {\n      mat-dialog-content {\n        min-width: 100%;\n        max-width: 100%;\n        padding: 16px;\n      }\n\n      .loan-info {\n        padding: 12px;\n      }\n\n      .info-row {\n        flex-direction: column;\n        gap: 4px;\n        margin-bottom: 12px;\n      }\n    }\n  `]\n})\nexport class LoanDisburseDialogComponent {\n  disburseForm: FormGroup;\n  isSubmitting = signal<boolean>(false);\n\n  constructor(\n    private fb: FormBuilder,\n    private dialogRef: MatDialogRef<LoanDisburseDialogComponent>,\n    private loanService: LoanService,\n    private snackBar: MatSnackBar,\n    @Inject(MAT_DIALOG_DATA) public data: LoanDisburseDialogData\n  ) {\n    this.disburseForm = this.createForm();\n  }\n\n  createForm(): FormGroup {\n    return this.fb.group({\n      disbursementDate: [new Date(), [Validators.required]],\n      disbursementMethod: ['', [Validators.required, Validators.maxLength(50)]],\n      accountNumber: ['', [Validators.maxLength(20)]],\n      bankName: ['', [Validators.maxLength(100)]],\n      ifscCode: ['', [Validators.maxLength(11)]],\n      referenceNumber: ['', [Validators.maxLength(100)]],\n      remarks: ['', [Validators.maxLength(500)]]\n    });\n  }\n\n  showBankFields(): boolean {\n    const method = this.disburseForm.get('disbursementMethod')?.value;\n    return ['BANK_TRANSFER', 'RTGS', 'NEFT', 'IMPS', 'ONLINE_PAYMENT'].includes(method);\n  }\n\n  onCancel(): void {\n    this.dialogRef.close();\n  }\n\n  onSubmit(): void {\n    if (this.disburseForm.valid) {\n      this.isSubmitting.set(true);\n      this.disburseLoan();\n    }\n  }\n\n  disburseLoan(): void {\n    const formValue = this.disburseForm.value;\n\n    // Format the date to YYYY-MM-DD\n    const disbursementDate = new Date(formValue.disbursementDate);\n    const formattedDate = disbursementDate.toISOString().split('T')[0];\n\n    const request: LoanDisbursementRequest = {\n      disbursementDate: formattedDate,\n      disbursementMethod: formValue.disbursementMethod,\n      accountNumber: formValue.accountNumber || undefined,\n      bankName: formValue.bankName || undefined,\n      ifscCode: formValue.ifscCode || undefined,\n      referenceNumber: formValue.referenceNumber || undefined,\n      remarks: formValue.remarks || undefined\n    };\n\n    this.loanService.disburseLoan(this.data.loan.id, request).subscribe({\n      next: (response) => {\n        if (response.success) {\n          this.snackBar.open('Loan disbursed successfully. EMI schedule has been generated.', 'Close', {\n            duration: 5000,\n            panelClass: ['success-snackbar']\n          });\n          this.dialogRef.close(true);\n        }\n        this.isSubmitting.set(false);\n      },\n      error: (error) => {\n        console.error('Error disbursing loan:', error);\n\n        // Extract error message - the error interceptor has already processed it\n        const errorMessage = error?.message || 'Failed to disburse loan. Please try again.';\n\n        this.snackBar.open(errorMessage, 'Close', {\n          duration: 5000,\n          panelClass: ['error-snackbar']\n        });\n        this.isSubmitting.set(false);\n      }\n    });\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}