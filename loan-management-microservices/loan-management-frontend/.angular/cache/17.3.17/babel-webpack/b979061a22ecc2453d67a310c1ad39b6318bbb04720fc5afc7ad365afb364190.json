{"ast":null,"code":"import { map } from 'rxjs/operators';\nimport { environment } from '@environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class DashboardService {\n  constructor(http) {\n    this.http = http;\n    this.API_URL = `${environment.apiUrl}/dashboard`;\n  }\n  /**\n   * Transform backend response to frontend model\n   */\n  transformDashboardData(backend) {\n    return {\n      // Map backend fields to frontend fields\n      totalLoans: backend.totalLoans || backend.myTotalLoans,\n      activeLoans: backend.myActiveLoans,\n      closedLoans: backend.myClosedLoans,\n      pendingLoans: backend.pendingApprovals || backend.myPendingLoans,\n      underReviewLoans: 0,\n      approvedLoans: backend.approvedLoans,\n      rejectedLoans: 0,\n      totalDisbursedAmount: backend.totalDisbursedAmount,\n      overdueEmis: backend.overdueCount,\n      totalOutstanding: backend.totalOutstanding,\n      nextEmiDueDate: backend.nextEmiDueDate,\n      nextEmiAmount: backend.nextEmiAmount,\n      nextEmiLoanId: backend.nextEmiLoanId,\n      recentApplications: backend.recentLoans || backend.myLoans || [],\n      upcomingEmis: []\n    };\n  }\n  /**\n   * Get role-specific dashboard data\n   * Admin sees overall stats, Officers see assigned loans, Customers see their loan summary\n   */\n  getDashboard() {\n    return this.http.get(this.API_URL).pipe(map(response => ({\n      success: true,\n      message: 'Dashboard data retrieved successfully',\n      data: this.transformDashboardData(response),\n      timestamp: new Date().toISOString()\n    })));\n  }\n  static {\n    this.ɵfac = function DashboardService_Factory(t) {\n      return new (t || DashboardService)(i0.ɵɵinject(i1.HttpClient));\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: DashboardService,\n      factory: DashboardService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"names":["map","environment","DashboardService","constructor","http","API_URL","apiUrl","transformDashboardData","backend","totalLoans","myTotalLoans","activeLoans","myActiveLoans","closedLoans","myClosedLoans","pendingLoans","pendingApprovals","myPendingLoans","underReviewLoans","approvedLoans","rejectedLoans","totalDisbursedAmount","overdueEmis","overdueCount","totalOutstanding","nextEmiDueDate","nextEmiAmount","nextEmiLoanId","recentApplications","recentLoans","myLoans","upcomingEmis","getDashboard","get","pipe","response","success","message","data","timestamp","Date","toISOString","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sources":["C:\\Users\\KIIT\\Desktop\\Loan Management System\\loan-management-frontend\\src\\app\\core\\services\\dashboard.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { environment } from '@environments/environment';\nimport { ApiResponse, DashboardStats, DashboardBackendResponse } from '../models/api-response.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DashboardService {\n  private readonly API_URL = `${environment.apiUrl}/dashboard`;\n\n  constructor(private http: HttpClient) {}\n\n  /**\n   * Transform backend response to frontend model\n   */\n  private transformDashboardData(backend: DashboardBackendResponse): DashboardStats {\n    return {\n      // Map backend fields to frontend fields\n      totalLoans: backend.totalLoans || backend.myTotalLoans,\n      activeLoans: backend.myActiveLoans,\n      closedLoans: backend.myClosedLoans,\n      pendingLoans: backend.pendingApprovals || backend.myPendingLoans,\n      underReviewLoans: 0, // Backend doesn't provide this, will need to calculate if needed\n      approvedLoans: backend.approvedLoans,\n      rejectedLoans: 0, // Backend doesn't provide this\n      totalDisbursedAmount: backend.totalDisbursedAmount,\n      overdueEmis: backend.overdueCount,\n      totalOutstanding: backend.totalOutstanding,\n      nextEmiDueDate: backend.nextEmiDueDate,\n      nextEmiAmount: backend.nextEmiAmount,\n      nextEmiLoanId: backend.nextEmiLoanId,\n      recentApplications: backend.recentLoans || backend.myLoans || [],\n      upcomingEmis: []\n    };\n  }\n\n  /**\n   * Get role-specific dashboard data\n   * Admin sees overall stats, Officers see assigned loans, Customers see their loan summary\n   */\n  getDashboard(): Observable<ApiResponse<DashboardStats>> {\n    return this.http.get<DashboardBackendResponse>(this.API_URL).pipe(\n      map(response => ({\n        success: true,\n        message: 'Dashboard data retrieved successfully',\n        data: this.transformDashboardData(response),\n        timestamp: new Date().toISOString()\n      }))\n    );\n  }\n}\n"],"mappings":"AAGA,SAASA,GAAG,QAAQ,gBAAgB;AACpC,SAASC,WAAW,QAAQ,2BAA2B;;;AAMvD,OAAM,MAAOC,gBAAgB;EAG3BC,YAAoBC,IAAgB;IAAhB,KAAAA,IAAI,GAAJA,IAAI;IAFP,KAAAC,OAAO,GAAG,GAAGJ,WAAW,CAACK,MAAM,YAAY;EAErB;EAEvC;;;EAGQC,sBAAsBA,CAACC,OAAiC;IAC9D,OAAO;MACL;MACAC,UAAU,EAAED,OAAO,CAACC,UAAU,IAAID,OAAO,CAACE,YAAY;MACtDC,WAAW,EAAEH,OAAO,CAACI,aAAa;MAClCC,WAAW,EAAEL,OAAO,CAACM,aAAa;MAClCC,YAAY,EAAEP,OAAO,CAACQ,gBAAgB,IAAIR,OAAO,CAACS,cAAc;MAChEC,gBAAgB,EAAE,CAAC;MACnBC,aAAa,EAAEX,OAAO,CAACW,aAAa;MACpCC,aAAa,EAAE,CAAC;MAChBC,oBAAoB,EAAEb,OAAO,CAACa,oBAAoB;MAClDC,WAAW,EAAEd,OAAO,CAACe,YAAY;MACjCC,gBAAgB,EAAEhB,OAAO,CAACgB,gBAAgB;MAC1CC,cAAc,EAAEjB,OAAO,CAACiB,cAAc;MACtCC,aAAa,EAAElB,OAAO,CAACkB,aAAa;MACpCC,aAAa,EAAEnB,OAAO,CAACmB,aAAa;MACpCC,kBAAkB,EAAEpB,OAAO,CAACqB,WAAW,IAAIrB,OAAO,CAACsB,OAAO,IAAI,EAAE;MAChEC,YAAY,EAAE;KACf;EACH;EAEA;;;;EAIAC,YAAYA,CAAA;IACV,OAAO,IAAI,CAAC5B,IAAI,CAAC6B,GAAG,CAA2B,IAAI,CAAC5B,OAAO,CAAC,CAAC6B,IAAI,CAC/DlC,GAAG,CAACmC,QAAQ,KAAK;MACfC,OAAO,EAAE,IAAI;MACbC,OAAO,EAAE,uCAAuC;MAChDC,IAAI,EAAE,IAAI,CAAC/B,sBAAsB,CAAC4B,QAAQ,CAAC;MAC3CI,SAAS,EAAE,IAAIC,IAAI,EAAE,CAACC,WAAW;KAClC,CAAC,CAAC,CACJ;EACH;;;uBA1CWvC,gBAAgB,EAAAwC,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;IAAA;EAAA;;;aAAhB3C,gBAAgB;MAAA4C,OAAA,EAAhB5C,gBAAgB,CAAA6C,IAAA;MAAAC,UAAA,EAFf;IAAM;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}